(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"6XFe":function(e,t,a){"use strict";a.r(t);var n=a("KQm4"),c=a("q1tI"),i=a.n(c),r=a("GlpG"),l=a.n(r),o=a("L12J"),s=a("o0o1"),m=a.n(s),u=(a("ls82"),a("HaE+")),d=a("Jgta"),p=a("bTjV"),f=a("c4Fx"),E=(a("Zs65"),function(e){var t=e.groupName,a=e.groupElements,n=e.addAdditional2;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"additional-group w-100 pb-4 pt-4"},i.a.createElement("h2",{className:"pl-4 group-title mb-0"},t),i.a.createElement("div",{className:"additional-group-wrapper d-flex flex-wrap"},a.map((function(e){return i.a.createElement(f.a,{key:"key"+e.name,name:e.name,weight:e.weight,img:e.img,description:e.description,cost:e.cost,id:e.id,addAdditional3:n,groupName:t})})))))}),g=function(e){var t=e.addAddition1,a=Object(c.useState)("error"),n=a[0],r=a[1];return Object(c.useEffect)((function(){(function(){var e=Object(u.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.database().ref("additionals").once("value").then((function(e){return e.val()}));case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"additional-wrapper d-flex flex-wrap"},"object"==typeof n?Object.keys(n).map((function(e){return i.a.createElement(E,{key:e,groupName:e,groupElements:Array.from(n[e]),addAdditional2:t})})):i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{color:"primary"}),i.a.createElement("span",null,"Loading data..."))))},v=(a("E9XD"),a("6Yhu")),h=a("ya9m"),b=a("sOKU"),y=a("UOVA"),N=a("iKxV"),w=function(e){var t=e.position,a=e.remover;var n="brown";return 2===t.quantity?n="blue":t.quantity>2&&(n="green"),i.a.createElement("div",{className:"d-flex check-element mb-2"},i.a.createElement("div",{className:["check-element-quantity",n].join(" ")},t.quantity),i.a.createElement("div",{className:"check-element-details"},i.a.createElement("h6",{className:["mb-0",n].join(" ")},t.name),i.a.createElement("div",{className:"time-array"},function(e){var t=e.slice();t.sort();for(var a=0;a<t.length;a+=1)"string"==typeof t[a]&&(t[a]=[1,t[a]]),a!==t.length-1&&t[a][1]===t[a+1]&&(t[a][0]+=1,t.splice(a+1,1),a-=1);return console.log("array: ",t),t}(t.time).map((function(e){return i.a.createElement("span",{key:e[1],className:"check-element-time"},e[0]," pc. at ",e[1],"; ")}))),i.a.createElement("span",{className:"check-element-summary-cost"},"x",t.cost,"=",(t.cost*t.quantity).toFixed(1),"$")),i.a.createElement(b.a,{close:!0,className:"ml-auto",onClick:function(){a(t.id)}},i.a.createElement(N.AiOutlineCloseCircle,null)))},k=function(e){var t=e.removePosition1,a=e.checkPosition,n=e.visitTime,r=e.tables,l=1,o=a.reduce((function(e,t){return e+ +t.cost*t.quantity}),0).toFixed(1),s=a.length>0?"total-container not-empty":"total-container",m=Object(c.useState)(!1),u=m[0],d=m[1];return i.a.createElement("div",{className:[u?"open":"",a.length?"not-empty-check":""].join(" ")},i.a.createElement("h2",{className:"pt-4"},"Basket"),i.a.createElement("button",{type:"button",className:"icon-open-mobile",onClick:function(){d(!u)}},i.a.createElement(h.IoIosArrowUp,null)),i.a.createElement("div",{className:"basket-wrapper pt-2"},a.map((function(e){return l+=1,i.a.createElement(w,{key:l,position:e,remover:t})}))),i.a.createElement("div",{className:s},i.a.createElement("span",null," ",a.length>0?"Total cost: "+o+"$":"Your basket is empty!"),i.a.createElement(b.a,{onClick:function(){var e={};e.tables=r,e.visit=n,e.additions={},a.forEach((function(t){e.additions[t.groupName]={cost:t.cost,id:t.id,name:t.name,quantity:t.quantity,time:t.time,weight:t.weight}})),console.log(e),function(e,t){if(!!y.a.auth().currentUser){var a=y.a.database(),n=y.a.auth().currentUser.uid;a.ref("users/"+n+"/orders/"+Date.now()).child(e).set(t)}}("/",e)}},i.a.createElement(v.VscDebugContinue,null)," ","Continue")))};a("hO8L"),a("e82H"),t.default=function(){var e,t,a=Object(c.useState)("tables"),s=a[0],m=a[1];var u=i.a.useState([]),d=u[0],p=u[1];return"tables"===s?i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,null,i.a.createElement(l.a,null),i.a.createElement("main",{className:"d-flex"}),i.a.createElement("input",{type:"date",id:"date",min:"2018-01-01",max:"2018-12-31"}),i.a.createElement("input",{type:"time",id:"time",name:"appt",min:"09:00",max:"18:00",required:!0}),i.a.createElement("button",{onClick:function(){document.getElementById("date").value&&document.getElementById("time").value?(t="Столы",e=document.getElementById("date").value+"T"+document.getElementById("time").value+"+03:00",m("additions")):r.store.addNotification({title:"Choose time!",message:"Choose a time to visit and book table",type:"warning",insert:"top",container:"top-right",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:3e3}})}},"To additions"))):i.a.createElement(i.a.Fragment,null," ",i.a.createElement(o.a,null,i.a.createElement(l.a,null),i.a.createElement("main",{className:"d-flex flex-wrap"},i.a.createElement("section",{className:"col-12 col-lg-9"},i.a.createElement(g,{addAddition1:function(e){var t=!1;e.id=""+d.length,d.forEach((function(a){a.name===e.name&&(t=!0,a.quantity+=1,a.time=[].concat(Object(n.a)(a.time),[e.time[0]]))})),p(t?Object(n.a)(d):[].concat(Object(n.a)(d),[e]))}})),i.a.createElement("aside",{className:"col-12 col-lg-3 basket-container"},i.a.createElement(k,{removePosition1:function(e){var t=e;d.forEach((function(a,n){a.id===e&&(t=n)})),d.splice(t,1);var a=d.slice();p(a)},key:d.length,checkPosition:d,visitTime:e,tables:t})))))}},"6Yhu":function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.VscDebugContinue=function(e){return n({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 2H4v12H2.5V2zm3.5.18V14l9-5.938-9-5.881zm6.315 5.882L7.5 5v6.18l4.815-3.118z"}}]})(e)}},bTjV:function(e,t,a){"use strict";var n=a("wx14"),c=a("zLVn"),i=a("q1tI"),r=a.n(i),l=a("TSYQ"),o=a.n(l),s=a("33Jr"),m=function(e){var t=e.className,a=e.cssModule,i=e.type,l=e.size,m=e.color,u=e.children,d=e.tag,p=Object(c.a)(e,["className","cssModule","type","size","color","children","tag"]),f=Object(s.m)(o()(t,!!l&&"spinner-"+i+"-"+l,"spinner-"+i,!!m&&"text-"+m),a);return r.a.createElement(d,Object(n.a)({role:"status"},p,{className:f}),u&&r.a.createElement("span",{className:Object(s.m)("sr-only",a)},u))};m.defaultProps={tag:"div",type:"border",children:"Loading..."},t.a=m},e82H:function(e,t,a){},hO8L:function(e,t,a){},iKxV:function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.AiOutlineCloseCircle=function(e){return n({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 0 0-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attr:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]})(e)}},ya9m:function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.IoIosArrowUp=function(e){return n({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z"}}]})(e)}}}]);
//# sourceMappingURL=component---src-pages-book-jsx-c1f02a5cc81022885afe.js.map