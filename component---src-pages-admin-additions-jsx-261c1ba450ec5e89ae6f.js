(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{BUa8:function(e,t,a){},DAHG:function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.AiOutlineAppstoreAdd=function(e){return n({tag:"svg",attr:{t:"1569683928793",viewBox:"0 0 1024 1024",version:"1.1"},child:[{tag:"defs",attr:{},child:[]},{tag:"path",attr:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H212V212h200v200zM864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H612V212h200v200zM864 544H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]})(e)}},"W+bz":function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.BsCardImage=function(e){return n({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M14.5 3h-13a.5.5 0 00-.5.5v9a.5.5 0 00.5.5h13a.5.5 0 00.5-.5v-9a.5.5 0 00-.5-.5zm-13-1A1.5 1.5 0 000 3.5v9A1.5 1.5 0 001.5 14h13a1.5 1.5 0 001.5-1.5v-9A1.5 1.5 0 0014.5 2h-13z",clipRule:"evenodd"}},{tag:"path",attr:{d:"M10.648 7.646a.5.5 0 01.577-.093L15.002 9.5V13h-14v-1l2.646-2.354a.5.5 0 01.63-.062l2.66 1.773 3.71-3.71z"}},{tag:"path",attr:{fillRule:"evenodd",d:"M4.502 7a1.5 1.5 0 100-3 1.5 1.5 0 000 3z",clipRule:"evenodd"}}]})(e)}},dVVw:function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.BiReset=function(e){return n({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12,16c1.671,0,3-1.331,3-3s-1.329-3-3-3s-3,1.331-3,3S10.329,16,12,16z"}},{tag:"path",attr:{d:"M20.817,11.186c-0.12-0.583-0.297-1.151-0.525-1.688c-0.225-0.532-0.504-1.046-0.83-1.531 c-0.324-0.479-0.693-0.926-1.098-1.329c-0.404-0.406-0.853-0.776-1.332-1.101c-0.483-0.326-0.998-0.604-1.528-0.829 c-0.538-0.229-1.106-0.405-1.691-0.526c-0.6-0.123-1.219-0.182-1.838-0.18V2L8,5l3.975,3V6.002C12.459,6,12.943,6.046,13.41,6.142 c0.454,0.094,0.896,0.231,1.314,0.409c0.413,0.174,0.813,0.392,1.188,0.644c0.373,0.252,0.722,0.54,1.038,0.857 c0.315,0.314,0.604,0.663,0.854,1.035c0.254,0.376,0.471,0.776,0.646,1.191c0.178,0.417,0.314,0.859,0.408,1.311 C18.952,12.048,19,12.523,19,13s-0.048,0.952-0.142,1.41c-0.094,0.454-0.23,0.896-0.408,1.315 c-0.175,0.413-0.392,0.813-0.644,1.188c-0.253,0.373-0.542,0.722-0.858,1.039c-0.315,0.316-0.663,0.603-1.036,0.854 c-0.372,0.251-0.771,0.468-1.189,0.645c-0.417,0.177-0.858,0.314-1.311,0.408c-0.92,0.188-1.906,0.188-2.822,0 c-0.454-0.094-0.896-0.231-1.314-0.409c-0.416-0.176-0.815-0.393-1.189-0.645c-0.371-0.25-0.719-0.538-1.035-0.854 c-0.315-0.316-0.604-0.665-0.855-1.036c-0.254-0.376-0.471-0.776-0.646-1.19c-0.178-0.418-0.314-0.86-0.408-1.312 C5.048,13.952,5,13.477,5,13H3c0,0.611,0.062,1.221,0.183,1.814c0.12,0.582,0.297,1.15,0.525,1.689 c0.225,0.532,0.504,1.046,0.831,1.531c0.323,0.477,0.692,0.924,1.097,1.329c0.406,0.407,0.854,0.777,1.331,1.099 c0.479,0.325,0.994,0.604,1.529,0.83c0.538,0.229,1.106,0.405,1.691,0.526C10.779,21.938,11.389,22,12,22s1.221-0.062,1.814-0.183 c0.583-0.121,1.151-0.297,1.688-0.525c0.537-0.227,1.052-0.506,1.53-0.83c0.478-0.322,0.926-0.692,1.331-1.099 c0.405-0.405,0.774-0.853,1.1-1.332c0.325-0.483,0.604-0.998,0.829-1.528c0.229-0.54,0.405-1.108,0.525-1.692 C20.938,14.221,21,13.611,21,13S20.938,11.779,20.817,11.186z"}}]})(e)}},"db8+":function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.MdDeleteForever=function(e){return n({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}}]})(e)}},ez5V:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),c=a.n(n),l=(a("ls82"),a("HaE+")),i=a("q1tI"),r=a.n(i),s=a("Jgta"),o=(a("Zs65"),a("sOKU")),d=a("bTjV"),m=a("DCcX"),u=a("vkoW"),p=a("CaDr"),g=a("wx14"),f=a("zLVn"),v=a("TSYQ"),h=a.n(v),E=a("33Jr"),b=function(e){var t=e.className,a=e.cssModule,n=e.tag,c=e.size,l=Object(f.a)(e,["className","cssModule","tag","size"]),i=Object(E.m)(h()(t,"input-group",c?"input-group-"+c:null),a);return r.a.createElement(n,Object(g.a)({},l,{className:i}))};b.defaultProps={tag:"div"};var w=b,N=function(e){var t=e.className,a=e.cssModule,n=e.tag,c=Object(f.a)(e,["className","cssModule","tag"]),l=Object(E.m)(h()(t,"input-group-text"),a);return r.a.createElement(n,Object(g.a)({},c,{className:l}))};N.defaultProps={tag:"span"};var y=N,O=function(e){var t=e.className,a=e.cssModule,n=e.tag,c=e.addonType,l=e.children,i=Object(f.a)(e,["className","cssModule","tag","addonType","children"]),s=Object(E.m)(h()(t,"input-group-"+c),a);return"string"==typeof l?r.a.createElement(n,Object(g.a)({},i,{className:s}),r.a.createElement(y,{children:l})):r.a.createElement(n,Object(g.a)({},i,{className:s,children:l}))};O.defaultProps={tag:"div"};var j=O,x=a("JX7q"),z=a("dI71"),I=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(x.a)(a)),a.focus=a.focus.bind(Object(x.a)(a)),a}Object(z.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.focus=function(){this.ref&&this.ref.focus()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,n=e.type,c=e.bsSize,l=e.valid,i=e.invalid,s=e.tag,o=e.addon,d=e.plaintext,m=e.innerRef,u=Object(f.a)(e,["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"]),p=["radio","checkbox"].indexOf(n)>-1,v=new RegExp("\\D","g"),b=s||("select"===n||"textarea"===n?n:"input"),w="form-control";d?(w+="-plaintext",b=s||"input"):"file"===n?w+="-file":"range"===n?w+="-range":p&&(w=o?null:"form-check-input"),u.size&&v.test(u.size)&&(Object(E.s)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),c=u.size,delete u.size);var N=Object(E.m)(h()(t,i&&"is-invalid",l&&"is-valid",!!c&&"form-control-"+c,w),a);return("input"===b||s&&"function"==typeof s)&&(u.type=n),u.children&&!d&&"select"!==n&&"string"==typeof b&&"select"!==b&&(Object(E.s)('Input with a type of "'+n+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete u.children),r.a.createElement(b,Object(g.a)({},u,{ref:m,className:N,"aria-invalid":i}))},t}(r.a.Component);I.defaultProps={type:"text"};var V=I,B=function(e){var t=e.className,a=e.cssModule,n=e.valid,c=e.tooltip,l=e.tag,i=Object(f.a)(e,["className","cssModule","valid","tooltip","tag"]),s=c?"tooltip":"feedback",o=Object(E.m)(h()(t,n?"valid-"+s:"invalid-"+s),a);return r.a.createElement(l,Object(g.a)({},i,{className:o}))};B.defaultProps={tag:"div",valid:void 0};var H=B,C=a("OBzv"),A=a("dVVw"),M=a("sZGH"),k=a("GlpG"),L=a.n(k),R=a("L12J"),S=a("DAHG"),D=a("ggLV"),P=a("db8+"),_=a("gEe8"),F=a("W+bz"),G=(a("5x/H"),a("6nsN"),a("WI49"),function(e){var t=e.name,a=e.weight,n=e.img,d=e.description,m=e.cost,u=e.groupName,p=e.elementIndex,g=e.additionsObject,f=e.setAdditionsObject,v=e.isEdit,h=e.setIsEdit,E=e.writeNewAdditions,b=Object(i.useState)("../../images/empty.jpg"),w=b[0],N=b[1];Object(i.useEffect)((function(){(function(){var e=Object(l.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.a.storage(),a=t.ref(),a.child(""+n).getDownloadURL().then((function(e){N(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var y=Object.assign({},g);function O(e,t){y[u][p][t]=e.target.value}return v===""+y[u][p].id?r.a.createElement("tr",{id:"editedElement",className:"edit-element"},r.a.createElement("td",{className:"title"},r.a.createElement("textarea",{defaultValue:y[u][p].name,onChange:function(e){return O(e,"name")},rows:"1"})),r.a.createElement("td",{className:"description"},r.a.createElement("textarea",{className:"description-input",defaultValue:y[u][p].description,onChange:function(e){return O(e,"description")}})),r.a.createElement("td",{className:"cost"},r.a.createElement("textarea",{defaultValue:y[u][p].cost,onChange:function(e){return O(e,"cost")},rows:"1"})),r.a.createElement("td",{className:"weight"},r.a.createElement("textarea",{defaultValue:y[u][p].weight,onChange:function(e){return O(e,"weight")},rows:"1"})),r.a.createElement("td",{className:"image"},r.a.createElement("label",{htmlFor:"new-image"},r.a.createElement("div",{id:"upload-container"},r.a.createElement("div",{className:"d-flex"},r.a.createElement(_.FiDownload,{id:"isReady"}),r.a.createElement(F.BsCardImage,{id:"isSelected",className:"d-none"}),r.a.createElement("input",{type:"file",id:"new-image",onChange:function(){document.getElementById("new-image").files[0]&&(document.getElementById("isReady").classList.add("d-none"),document.getElementById("isSelected").classList.remove("d-none"))}}))))),r.a.createElement("td",{className:"control-buttons"},r.a.createElement(o.a,{color:"success",onClick:function(){var e,t,a;document.getElementById("new-image").files[0]?(e=document.getElementById("new-image").files[0],t=document.getElementById("new-image").files[0]?e.name.split(".")[1]:".jpg",a=Date.now()+"."+t,y[u][p].img="additionals/"+a,s.a.storage().ref("additionals/"+a).put(e).then((function(){console.log("картинка отправилась"),y[u][p].id=""+Date.now(),f(y),E(y),h("")}))):(y[u][p].id=""+Date.now(),f(y),E(y),h(""))}},r.a.createElement(D.RiSave3Fill,null))),r.a.createElement("td",{className:"control-buttons"},r.a.createElement(o.a,{color:"danger",onClick:function(){y[u].splice(p,1),y[u][0]||delete y[u],f(y),E(y),h("")}},r.a.createElement(P.MdDeleteForever,null)))):r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{className:"category-element",onClick:function(){return h(y[u][p].id)}},r.a.createElement("td",{className:"title"},t),r.a.createElement("td",{className:"description"},d),r.a.createElement("td",{className:"cost"},m),r.a.createElement("td",{className:"weight"},a),r.a.createElement("td",{className:"image"},r.a.createElement("img",{src:w,width:"30",alt:"Additional"}))))}),J=(a("BUa8"),function(e){var t=e.groupName,a=e.groupElements,n=e.additionsObject,c=e.setAdditionsObject,l=e.isEdit,i=e.setIsEdit,s=e.writeNewAdditions;return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{className:"category-name"},r.a.createElement("td",{colSpan:"5"},r.a.createElement("div",{className:"table-header"},r.a.createElement("h5",null,t),r.a.createElement(o.a,{color:"primary",className:"btn-icon-split",onClick:function(){var e,a,c;l?k.store.addNotification({title:"Save changes!",message:"Please save all changes you made.",type:"warning",insert:"top",container:"top-right",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:5e3}}):(e=n,a=Object.assign({},e),c={cost:"0",description:"...",img:"additionals/empty.jpg",name:"New additional",weight:"0 gr.",id:""+Date.now()},a[t].push(c),i(a[t][a[t].length-1].id),s(a),setTimeout((function(){return document.getElementById("editedElement").scrollIntoView({behavior:"smooth"})}),500))}},r.a.createElement("span",{className:"icon text-white-50"},r.a.createElement(S.AiOutlineAppstoreAdd,null)),r.a.createElement("span",{className:"text"},"New Addition"))))),a.map((function(e,a){return r.a.createElement(G,{key:"key"+e.id,name:e.name,weight:e.weight,img:e.img,description:e.description,cost:e.cost,groupName:t,elementIndex:a,additionsObject:n,setAdditionsObject:c,isEdit:l,setIsEdit:i,writeNewAdditions:s})})))});t.default=function(){var e=Object(i.useState)(""),t=e[0],a=e[1],n=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.database().ref("defaultAdditionals").once("value").then((function(e){return e.val()}));case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){n()}),[]);var g=Object(i.useState)("error"),f=g[0],v=g[1];Object(i.useEffect)((function(){(function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.database().ref("additionals").once("value").then((function(e){return e.val()}));case 2:t=e.sent,v(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var h=Object(i.useState)(""),E=h[0],b=h[1];function N(e){s.a.database().ref("additionals").set(e)}var O=Object(i.useState)(!1),x=O[0],z=O[1],I=function(){return z(!x)};var B=E?"table table-bordered is-edit":"table table-bordered";return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null,r.a.createElement(L.a,null),r.a.createElement("main",{className:"pt-3 pb-3"},r.a.createElement("div",{className:"additional-edit p-3 d-flex flex-wrap"},r.a.createElement("div",{className:"editions-header pb-3"},r.a.createElement("h2",null,"Edit additionals"),r.a.createElement("div",null,r.a.createElement(o.a,{color:"primary",className:"btn-icon-split",onClick:function(){n(),N(t),v(t),b("")}},r.a.createElement("span",{className:"icon text-white-50"},r.a.createElement(A.BiReset,null)),r.a.createElement("span",{className:"text"},"Reset")),r.a.createElement(o.a,{color:"primary",className:"btn-icon-split",onClick:function(){E?k.store.addNotification({title:"Save changes!",message:"Please save all changes you made.",type:"warning",insert:"top",container:"top-right",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:5e3}}):I()}},r.a.createElement("span",{className:"icon text-white-50"},r.a.createElement(M.AiFillFolderAdd,null)),r.a.createElement("span",{className:"text"},"Add Category")))),r.a.createElement("table",{className:B,id:"dataTable",width:"100%",cellSpacing:"0"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Cost"),r.a.createElement("th",null,"Weight"),r.a.createElement("th",null,"Image"))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Cost"),r.a.createElement("th",null,"Weight"),r.a.createElement("th",null,"Image"))),r.a.createElement("tbody",null,"object"==typeof f?Object.keys(f).map((function(e){return r.a.createElement(J,{key:e,groupName:e,groupElements:Array.from(f[e]),additionsObject:f,setAdditionsObject:v,isEdit:E,setIsEdit:b,writeNewAdditions:N})})):r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",{className:"d-flex",colSpan:"5"},r.a.createElement(d.a,{color:"primary"}),r.a.createElement("span",{className:"m-auto align-self-center"},"Loading data...")))))))),r.a.createElement("div",null,r.a.createElement(m.a,{isOpen:x,toggle:I},r.a.createElement(u.a,{toggle:I},"Create new category:"),r.a.createElement(p.a,null,r.a.createElement(w,null,r.a.createElement(j,{addonType:"prepend"},r.a.createElement(y,null,"Enter name:")),r.a.createElement(V,{pattern:"[A-Za-z]{2,20}",required:!0,id:"name-of-new-category"}),r.a.createElement(H,{id:"invalid-form-message",className:"d-none"},"Please enter the name of the group in Latin letters from 2 to 20 characters."))),r.a.createElement(C.a,null,r.a.createElement(o.a,{color:"primary",onClick:function(){var e,t,a;/[A-Za-z]{2,20}/.test(document.getElementById("name-of-new-category").value)?(e=[{cost:"0",description:"...",img:"additionals/empty.jpg",name:"New additional",weight:"0 gr.",id:""+Date.now()}],t=document.getElementById("name-of-new-category").value,(a=Object.assign({},f))[t]=e,v(a),b(a[t][0].id),I(),setTimeout((function(){return document.getElementById("editedElement").scrollIntoView({behavior:"smooth"})}),500)):(document.getElementById("name-of-new-category").classList.add("is-invalid"),document.getElementById("invalid-form-message").classList.remove("d-none"))}},"Create"),r.a.createElement(o.a,{color:"secondary",onClick:I},"Cancel"))))))}},gEe8:function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.FiDownload=function(e){return n({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"7 10 12 15 17 10"}},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"}}]})(e)}},ggLV:function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.RiSave3Fill=function(e){return n({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M4 3h14l2.707 2.707a1 1 0 0 1 .293.707V20a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm3 1v5h9V4H7zm-1 8v7h12v-7H6zm7-7h2v3h-2V5z"}}]}]})(e)}},sZGH:function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.AiFillFolderAdd=function(e){return n({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 0 0-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM632 577c0 3.8-3.4 7-7.5 7H540v84.9c0 3.9-3.2 7.1-7 7.1h-42c-3.8 0-7-3.2-7-7.1V584h-84.5c-4.1 0-7.5-3.2-7.5-7v-42c0-3.8 3.4-7 7.5-7H484v-84.9c0-3.9 3.2-7.1 7-7.1h42c3.8 0 7 3.2 7 7.1V528h84.5c4.1 0 7.5 3.2 7.5 7v42z"}}]})(e)}}}]);
//# sourceMappingURL=component---src-pages-admin-additions-jsx-261c1ba450ec5e89ae6f.js.map