(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{BUa8:function(e,t,a){},DAHG:function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.AiOutlineAppstoreAdd=function(e){return n({tag:"svg",attr:{t:"1569683928793",viewBox:"0 0 1024 1024",version:"1.1"},child:[{tag:"defs",attr:{},child:[]},{tag:"path",attr:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H212V212h200v200zM864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H612V212h200v200zM864 544H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]})(e)}},"W+bz":function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.BsCardImage=function(e){return n({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M14.5 3h-13a.5.5 0 00-.5.5v9a.5.5 0 00.5.5h13a.5.5 0 00.5-.5v-9a.5.5 0 00-.5-.5zm-13-1A1.5 1.5 0 000 3.5v9A1.5 1.5 0 001.5 14h13a1.5 1.5 0 001.5-1.5v-9A1.5 1.5 0 0014.5 2h-13z",clipRule:"evenodd"}},{tag:"path",attr:{d:"M10.648 7.646a.5.5 0 01.577-.093L15.002 9.5V13h-14v-1l2.646-2.354a.5.5 0 01.63-.062l2.66 1.773 3.71-3.71z"}},{tag:"path",attr:{fillRule:"evenodd",d:"M4.502 7a1.5 1.5 0 100-3 1.5 1.5 0 000 3z",clipRule:"evenodd"}}]})(e)}},dVVw:function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.BiReset=function(e){return n({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12,16c1.671,0,3-1.331,3-3s-1.329-3-3-3s-3,1.331-3,3S10.329,16,12,16z"}},{tag:"path",attr:{d:"M20.817,11.186c-0.12-0.583-0.297-1.151-0.525-1.688c-0.225-0.532-0.504-1.046-0.83-1.531 c-0.324-0.479-0.693-0.926-1.098-1.329c-0.404-0.406-0.853-0.776-1.332-1.101c-0.483-0.326-0.998-0.604-1.528-0.829 c-0.538-0.229-1.106-0.405-1.691-0.526c-0.6-0.123-1.219-0.182-1.838-0.18V2L8,5l3.975,3V6.002C12.459,6,12.943,6.046,13.41,6.142 c0.454,0.094,0.896,0.231,1.314,0.409c0.413,0.174,0.813,0.392,1.188,0.644c0.373,0.252,0.722,0.54,1.038,0.857 c0.315,0.314,0.604,0.663,0.854,1.035c0.254,0.376,0.471,0.776,0.646,1.191c0.178,0.417,0.314,0.859,0.408,1.311 C18.952,12.048,19,12.523,19,13s-0.048,0.952-0.142,1.41c-0.094,0.454-0.23,0.896-0.408,1.315 c-0.175,0.413-0.392,0.813-0.644,1.188c-0.253,0.373-0.542,0.722-0.858,1.039c-0.315,0.316-0.663,0.603-1.036,0.854 c-0.372,0.251-0.771,0.468-1.189,0.645c-0.417,0.177-0.858,0.314-1.311,0.408c-0.92,0.188-1.906,0.188-2.822,0 c-0.454-0.094-0.896-0.231-1.314-0.409c-0.416-0.176-0.815-0.393-1.189-0.645c-0.371-0.25-0.719-0.538-1.035-0.854 c-0.315-0.316-0.604-0.665-0.855-1.036c-0.254-0.376-0.471-0.776-0.646-1.19c-0.178-0.418-0.314-0.86-0.408-1.312 C5.048,13.952,5,13.477,5,13H3c0,0.611,0.062,1.221,0.183,1.814c0.12,0.582,0.297,1.15,0.525,1.689 c0.225,0.532,0.504,1.046,0.831,1.531c0.323,0.477,0.692,0.924,1.097,1.329c0.406,0.407,0.854,0.777,1.331,1.099 c0.479,0.325,0.994,0.604,1.529,0.83c0.538,0.229,1.106,0.405,1.691,0.526C10.779,21.938,11.389,22,12,22s1.221-0.062,1.814-0.183 c0.583-0.121,1.151-0.297,1.688-0.525c0.537-0.227,1.052-0.506,1.53-0.83c0.478-0.322,0.926-0.692,1.331-1.099 c0.405-0.405,0.774-0.853,1.1-1.332c0.325-0.483,0.604-0.998,0.829-1.528c0.229-0.54,0.405-1.108,0.525-1.692 C20.938,14.221,21,13.611,21,13S20.938,11.779,20.817,11.186z"}}]})(e)}},"db8+":function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.MdDeleteForever=function(e){return n({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}}]})(e)}},ez5V:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),c=a.n(n),l=(a("ls82"),a("HaE+")),r=a("q1tI"),i=a.n(r),s=a("Jgta"),o=(a("Zs65"),a("sOKU")),d=a("wx14"),m=a("zLVn"),u=a("TSYQ"),p=a.n(u),g=a("33Jr"),f=function(e){var t=e.className,a=e.cssModule,n=e.type,c=e.size,l=e.color,r=e.children,s=e.tag,o=Object(m.a)(e,["className","cssModule","type","size","color","children","tag"]),u=Object(g.m)(p()(t,!!c&&"spinner-"+n+"-"+c,"spinner-"+n,!!l&&"text-"+l),a);return i.a.createElement(s,Object(d.a)({role:"status"},o,{className:u}),r&&i.a.createElement("span",{className:Object(g.m)("sr-only",a)},r))};f.defaultProps={tag:"div",type:"border",children:"Loading..."};var v=f,h=a("DCcX"),E=a("vkoW"),b=a("CaDr"),w=function(e){var t=e.className,a=e.cssModule,n=e.tag,c=e.size,l=Object(m.a)(e,["className","cssModule","tag","size"]),r=Object(g.m)(p()(t,"input-group",c?"input-group-"+c:null),a);return i.a.createElement(n,Object(d.a)({},l,{className:r}))};w.defaultProps={tag:"div"};var N=w,y=function(e){var t=e.className,a=e.cssModule,n=e.tag,c=Object(m.a)(e,["className","cssModule","tag"]),l=Object(g.m)(p()(t,"input-group-text"),a);return i.a.createElement(n,Object(d.a)({},c,{className:l}))};y.defaultProps={tag:"span"};var O=y,j=function(e){var t=e.className,a=e.cssModule,n=e.tag,c=e.addonType,l=e.children,r=Object(m.a)(e,["className","cssModule","tag","addonType","children"]),s=Object(g.m)(p()(t,"input-group-"+c),a);return"string"==typeof l?i.a.createElement(n,Object(d.a)({},r,{className:s}),i.a.createElement(O,{children:l})):i.a.createElement(n,Object(d.a)({},r,{className:s,children:l}))};j.defaultProps={tag:"div"};var x=j,z=a("JX7q"),I=a("dI71"),V=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(z.a)(a)),a.focus=a.focus.bind(Object(z.a)(a)),a}Object(I.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.focus=function(){this.ref&&this.ref.focus()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,n=e.type,c=e.bsSize,l=e.valid,r=e.invalid,s=e.tag,o=e.addon,u=e.plaintext,f=e.innerRef,v=Object(m.a)(e,["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"]),h=["radio","checkbox"].indexOf(n)>-1,E=new RegExp("\\D","g"),b=s||("select"===n||"textarea"===n?n:"input"),w="form-control";u?(w+="-plaintext",b=s||"input"):"file"===n?w+="-file":"range"===n?w+="-range":h&&(w=o?null:"form-check-input"),v.size&&E.test(v.size)&&(Object(g.s)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),c=v.size,delete v.size);var N=Object(g.m)(p()(t,r&&"is-invalid",l&&"is-valid",!!c&&"form-control-"+c,w),a);return("input"===b||s&&"function"==typeof s)&&(v.type=n),v.children&&!u&&"select"!==n&&"string"==typeof b&&"select"!==b&&(Object(g.s)('Input with a type of "'+n+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete v.children),i.a.createElement(b,Object(d.a)({},v,{ref:f,className:N,"aria-invalid":r}))},t}(i.a.Component);V.defaultProps={type:"text"};var B=V,H=function(e){var t=e.className,a=e.cssModule,n=e.valid,c=e.tooltip,l=e.tag,r=Object(m.a)(e,["className","cssModule","valid","tooltip","tag"]),s=c?"tooltip":"feedback",o=Object(g.m)(p()(t,n?"valid-"+s:"invalid-"+s),a);return i.a.createElement(l,Object(d.a)({},r,{className:o}))};H.defaultProps={tag:"div",valid:void 0};var C=H,A=a("OBzv"),M=a("dVVw"),k=a("sZGH"),L=a("GlpG"),R=a.n(L),S=a("L12J"),P=a("DAHG"),D=a("ggLV"),_=a("db8+"),F=a("gEe8"),G=a("W+bz"),J=(a("5x/H"),a("6nsN"),a("WI49"),function(e){var t=e.name,a=e.weight,n=e.img,d=e.description,m=e.cost,u=e.groupName,p=e.elementIndex,g=e.additionsObject,f=e.setAdditionsObject,v=e.isEdit,h=e.setIsEdit,E=e.writeNewAdditions,b=Object(r.useState)("../../images/empty.jpg"),w=b[0],N=b[1];Object(r.useEffect)((function(){(function(){var e=Object(l.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.a.storage(),a=t.ref(),a.child(""+n).getDownloadURL().then((function(e){N(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var y=Object.assign({},g);function O(e,t){y[u][p][t]=e.target.value}return v===""+y[u][p].id?i.a.createElement("tr",{id:"editedElement",className:"edit-element"},i.a.createElement("td",{className:"title"},i.a.createElement("textarea",{defaultValue:y[u][p].name,onChange:function(e){return O(e,"name")},rows:"1"})),i.a.createElement("td",{className:"description"},i.a.createElement("textarea",{className:"description-input",defaultValue:y[u][p].description,onChange:function(e){return O(e,"description")}})),i.a.createElement("td",{className:"cost"},i.a.createElement("textarea",{defaultValue:y[u][p].cost,onChange:function(e){return O(e,"cost")},rows:"1"})),i.a.createElement("td",{className:"weight"},i.a.createElement("textarea",{defaultValue:y[u][p].weight,onChange:function(e){return O(e,"weight")},rows:"1"})),i.a.createElement("td",{className:"image"},i.a.createElement("label",{htmlFor:"new-image"},i.a.createElement("div",{id:"upload-container"},i.a.createElement("div",{className:"d-flex"},i.a.createElement(F.FiDownload,{id:"isReady"}),i.a.createElement(G.BsCardImage,{id:"isSelected",className:"d-none"}),i.a.createElement("input",{type:"file",id:"new-image",onChange:function(){document.getElementById("new-image").files[0]&&(document.getElementById("isReady").classList.add("d-none"),document.getElementById("isSelected").classList.remove("d-none"))}}))))),i.a.createElement("td",{className:"control-buttons"},i.a.createElement(o.a,{color:"success",onClick:function(){var e,t,a;document.getElementById("new-image").files[0]?(e=document.getElementById("new-image").files[0],t=document.getElementById("new-image").files[0]?e.name.split(".")[1]:".jpg",a=Date.now()+"."+t,y[u][p].img="additionals/"+a,s.a.storage().ref("additionals/"+a).put(e).then((function(){console.log("картинка отправилась"),y[u][p].id=""+Date.now(),f(y),E(y),h("")}))):(y[u][p].id=""+Date.now(),f(y),E(y),h(""))}},i.a.createElement(D.RiSave3Fill,null))),i.a.createElement("td",{className:"control-buttons"},i.a.createElement(o.a,{color:"danger",onClick:function(){y[u].splice(p,1),y[u][0]||delete y[u],f(y),E(y),h("")}},i.a.createElement(_.MdDeleteForever,null)))):i.a.createElement(i.a.Fragment,null,i.a.createElement("tr",{className:"category-element",onClick:function(){return h(y[u][p].id)}},i.a.createElement("td",{className:"title"},t),i.a.createElement("td",{className:"description"},d),i.a.createElement("td",{className:"cost"},m),i.a.createElement("td",{className:"weight"},a),i.a.createElement("td",{className:"image"},i.a.createElement("img",{src:w,width:"30",alt:"Additional"}))))}),T=(a("BUa8"),function(e){var t=e.groupName,a=e.groupElements,n=e.additionsObject,c=e.setAdditionsObject,l=e.isEdit,r=e.setIsEdit,s=e.writeNewAdditions;return i.a.createElement(i.a.Fragment,null,i.a.createElement("tr",{className:"category-name"},i.a.createElement("td",{colSpan:"5"},i.a.createElement("div",{className:"table-header"},i.a.createElement("h5",null,t),i.a.createElement(o.a,{color:"primary",className:"btn-icon-split",onClick:function(){var e,a,c;l?L.store.addNotification({title:"Save changes!",message:"Please save all changes you made.",type:"warning",insert:"top",container:"top-right",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:5e3}}):(e=n,a=Object.assign({},e),c={cost:"0",description:"...",img:"additionals/empty.jpg",name:"New additional",weight:"0 gr.",id:""+Date.now()},a[t].push(c),r(a[t][a[t].length-1].id),s(a),setTimeout((function(){return document.getElementById("editedElement").scrollIntoView({behavior:"smooth"})}),500))}},i.a.createElement("span",{className:"icon text-white-50"},i.a.createElement(P.AiOutlineAppstoreAdd,null)),i.a.createElement("span",{className:"text"},"New Addition"))))),a.map((function(e,a){return i.a.createElement(J,{key:"key"+e.id,name:e.name,weight:e.weight,img:e.img,description:e.description,cost:e.cost,groupName:t,elementIndex:a,additionsObject:n,setAdditionsObject:c,isEdit:l,setIsEdit:r,writeNewAdditions:s})})))});t.default=function(){var e=Object(r.useState)(""),t=e[0],a=e[1],n=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.database().ref("defaultAdditionals").once("value").then((function(e){return e.val()}));case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){n()}),[]);var d=Object(r.useState)("error"),m=d[0],u=d[1];Object(r.useEffect)((function(){(function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.database().ref("additionals").once("value").then((function(e){return e.val()}));case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var p=Object(r.useState)(""),g=p[0],f=p[1];function w(e){s.a.database().ref("additionals").set(e)}var y=Object(r.useState)(!1),j=y[0],z=y[1],I=function(){return z(!j)};var V=g?"table table-bordered is-edit":"table table-bordered";return i.a.createElement(i.a.Fragment,null,i.a.createElement(S.a,null,i.a.createElement(R.a,null),i.a.createElement("main",{className:"pt-3 pb-3"},i.a.createElement("div",{className:"additional-edit p-3 d-flex flex-wrap"},i.a.createElement("div",{className:"editions-header pb-3"},i.a.createElement("h2",null,"Edit additionals"),i.a.createElement("div",null,i.a.createElement(o.a,{color:"primary",className:"btn-icon-split",onClick:function(){n(),w(t),u(t),f("")}},i.a.createElement("span",{className:"icon text-white-50"},i.a.createElement(M.BiReset,null)),i.a.createElement("span",{className:"text"},"Reset")),i.a.createElement(o.a,{color:"primary",className:"btn-icon-split",onClick:function(){g?L.store.addNotification({title:"Save changes!",message:"Please save all changes you made.",type:"warning",insert:"top",container:"top-right",animationIn:["animate__animated animate__fadeIn"],animationOut:["animate__animated animate__fadeOut"],dismiss:{duration:5e3}}):I()}},i.a.createElement("span",{className:"icon text-white-50"},i.a.createElement(k.AiFillFolderAdd,null)),i.a.createElement("span",{className:"text"},"Add Category")))),i.a.createElement("table",{className:V,id:"dataTable",width:"100%",cellSpacing:"0"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Name"),i.a.createElement("th",null,"Description"),i.a.createElement("th",null,"Cost"),i.a.createElement("th",null,"Weight"),i.a.createElement("th",null,"Image"))),i.a.createElement("tfoot",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Name"),i.a.createElement("th",null,"Description"),i.a.createElement("th",null,"Cost"),i.a.createElement("th",null,"Weight"),i.a.createElement("th",null,"Image"))),i.a.createElement("tbody",null,"object"==typeof m?Object.keys(m).map((function(e){return i.a.createElement(T,{key:e,groupName:e,groupElements:Array.from(m[e]),additionsObject:m,setAdditionsObject:u,isEdit:g,setIsEdit:f,writeNewAdditions:w})})):i.a.createElement(i.a.Fragment,null,i.a.createElement("tr",null,i.a.createElement("td",{className:"d-flex",colSpan:"5"},i.a.createElement(v,{color:"primary"}),i.a.createElement("span",{className:"m-auto align-self-center"},"Loading data...")))))))),i.a.createElement("div",null,i.a.createElement(h.a,{isOpen:j,toggle:I},i.a.createElement(E.a,{toggle:I},"Create new category:"),i.a.createElement(b.a,null,i.a.createElement(N,null,i.a.createElement(x,{addonType:"prepend"},i.a.createElement(O,null,"Enter name:")),i.a.createElement(B,{pattern:"[A-Za-z]{2,20}",required:!0,id:"name-of-new-category"}),i.a.createElement(C,{id:"invalid-form-message",className:"d-none"},"Please enter the name of the group in Latin letters from 2 to 20 characters."))),i.a.createElement(A.a,null,i.a.createElement(o.a,{color:"primary",onClick:function(){var e,t,a;/[A-Za-z]{2,20}/.test(document.getElementById("name-of-new-category").value)?(e=[{cost:"0",description:"...",img:"additionals/empty.jpg",name:"New additional",weight:"0 gr.",id:""+Date.now()}],t=document.getElementById("name-of-new-category").value,(a=Object.assign({},m))[t]=e,u(a),f(a[t][0].id),I(),setTimeout((function(){return document.getElementById("editedElement").scrollIntoView({behavior:"smooth"})}),500)):(document.getElementById("name-of-new-category").classList.add("is-invalid"),document.getElementById("invalid-form-message").classList.remove("d-none"))}},"Create"),i.a.createElement(o.a,{color:"secondary",onClick:I},"Cancel"))))))}},gEe8:function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.FiDownload=function(e){return n({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"7 10 12 15 17 10"}},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"}}]})(e)}},ggLV:function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.RiSave3Fill=function(e){return n({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M4 3h14l2.707 2.707a1 1 0 0 1 .293.707V20a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm3 1v5h9V4H7zm-1 8v7h12v-7H6zm7-7h2v3h-2V5z"}}]}]})(e)}},sZGH:function(e,t,a){var n=a("BPHJ").GenIcon;e.exports.AiFillFolderAdd=function(e){return n({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 0 0-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM632 577c0 3.8-3.4 7-7.5 7H540v84.9c0 3.9-3.2 7.1-7 7.1h-42c-3.8 0-7-3.2-7-7.1V584h-84.5c-4.1 0-7.5-3.2-7.5-7v-42c0-3.8 3.4-7 7.5-7H484v-84.9c0-3.9 3.2-7.1 7-7.1h42c3.8 0 7 3.2 7 7.1V528h84.5c4.1 0 7.5 3.2 7.5 7v42z"}}]})(e)}}}]);
//# sourceMappingURL=component---src-pages-admin-additions-jsx-28308d995f1ab77a3f81.js.map